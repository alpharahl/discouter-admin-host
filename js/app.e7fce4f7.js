(function(e){function t(t){for(var n,o,r=t[0],u=t[1],c=t[2],p=0,l=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&l.push(a[o][0]),a[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);d&&d(t);while(l.length)l.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],n=!0,r=1;r<s.length;r++){var u=s[r];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=n,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(s,n,function(t){return e[t]}.bind(null,n));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=u;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var n=s("85ec"),a=s.n(n);a.a},"06c1":function(e,t,s){"use strict";var n=s("b919"),a=s.n(n);a.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("0cdd");var n=s("2b0e"),a=s("5f5b"),i=s("b1e0");s("ab8b"),s("2dd8");n["default"].use(a["a"]),n["default"].use(i["a"]);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("Nav"),s("div",{staticClass:"container mt-3"},[e.loggedIn?s("router-view"):s("Login")],1)],1)},r=[],u=s("8aa5"),c=s.n(u),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",[e._v(" Please sign in to the admin console with your google account. ")]),s("b-button",{attrs:{variant:"success"},on:{click:e.login}},[e._v("Sign In")])],1)},p=[],l={name:"Login",methods:{login:function(){var e=new c.a.auth.GoogleAuthProvider;c.a.auth().signInWithPopup(e).then((function(e){console.log("logged in")})).catch((function(e){alert("Something went wrong, please try again later")}))}}},v=l,f=s("2877"),b=Object(f["a"])(v,d,p,!1,null,"0a1beb80",null),m=b.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[s("b-navbar-brand",{attrs:{to:"/"}},[e._v("Home")]),s("b-navbar-nav",[s("b-nav-item",{attrs:{to:{name:"Types"}}},[e._v("Business Types")])],1),e.loggedIn?s("b-button",{staticClass:"ml-auto",attrs:{variant:"info"},on:{click:e.logout}},[e._v("Logout")]):e._e()],1)},g=[],y={name:"Nav",methods:{logout:function(){c.a.auth().signOut()}},data:function(){return{loggedIn:!1}},mounted:function(){var e=this;c.a.auth().onAuthStateChanged((function(t){e.loggedIn=t}))}},w=y,I=Object(f["a"])(w,h,g,!1,null,"50f9209e",null),B=I.exports,k={name:"App",components:{Nav:B,Login:m},data:function(){return{loggedIn:!1}},mounted:function(){var e=this;c.a.auth().onAuthStateChanged((function(t){e.loggedIn=t}))}},C=k,j=(s("034f"),Object(f["a"])(C,o,r,!1,null,null,null)),x=j.exports,O=s("8c4f"),A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-tabs",{attrs:{"content-class":"mt-3"}},[s("b-tab",{attrs:{title:"Approved",active:""}},[s("ApprovedBusinesses")],1),s("b-tab",{attrs:{title:"Not yet approved"}},[s("PendingApproval")],1),s("b-tab",{attrs:{title:"Disapproved"}},[s("DisapprovedBusinesses")],1)],1)},T=[],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},e._l(e.approvedBusinesses,(function(t){return s("div",{key:t.id,staticClass:"d-flex"},[s("div",[e._v(e._s(t.name))]),s("b-button",{staticClass:"ml-auto",attrs:{variant:"link",to:{name:"Business",params:{id:t.id}}}},[e._v(" visit ")])],1)})),0)},D=[],P=s("2ef0"),E=s.n(P),$={name:"ApprovedBusinesses",data:function(){return{approvedBusinessIds:{},businesses:{}}},computed:{approvedBusinesses:function(){var e=[];if(console.log(this.businesses,this.approvedBusinessIds),E.a.isEmpty(this.businesses)||E.a.isEmpty(this.approvedBusinessIds))return e;for(var t in this.approvedBusinessIds)if(this.approvedBusinessIds[t]){var s=this.businesses[t];s&&(s.id=t,e.push(s))}return e}},mounted:function(){var e=this;c.a.database().ref("/approved").on("value",(function(t){console.log(t.val()),e.approvedBusinessIds=t.val()})),c.a.database().ref("/businesses").on("value",(function(t){e.businesses=t.val()}))}},U=$,N=Object(f["a"])(U,S,D,!1,null,"0be92a35",null),M=N.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",e._l(e.pendingBusinesses,(function(t){return s("div",{key:t.id,staticClass:"d-flex"},[s("div",[e._v(e._s(t.name))]),s("b-button",{staticClass:"ml-auto",attrs:{variant:"link",to:{name:"Business",params:{id:t.id}}}},[e._v(" visit ")])],1)})),0)},R=[],H=(s("caad"),s("b64b"),s("2532"),{name:"PendingApproval",computed:{pendingBusinesses:function(){var e=[];for(var t in this.businesses)if(!this.approvedDisapprovedIds.includes(t)){var s=this.businesses[t];s.id=t,e.push(s)}return e}},data:function(){return{approvedDisapprovedIds:{},businesses:{}}},mounted:function(){var e=this;c.a.database().ref("/approved").on("value",(function(t){e.approvedDisapprovedIds=Object.keys(t.val())})),c.a.database().ref("/businesses").on("value",(function(t){e.businesses=t.val()}))}}),W=H,F=Object(f["a"])(W,L,R,!1,null,"a07a1150",null),G=F.exports,z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},e._l(e.disapprovedBusinesses,(function(t){return s("div",{key:t.id,staticClass:"d-flex"},[s("div",[e._v(e._s(t.name))]),s("b-button",{staticClass:"ml-auto",attrs:{variant:"link",to:{name:"Business",params:{id:t.id}}}},[e._v(" visit ")])],1)})),0)},V=[],Z={name:"DisapprovedBusinesses",data:function(){return{disapprovedBusinessIds:{},businesses:{}}},computed:{disapprovedBusinesses:function(){var e=[];if(console.log(this.businesses,this.disapprovedBusinessIds),_.isEmpty(this.businesses)||_.isEmpty(this.disapprovedBusinessIds))return e;for(var t in this.disapprovedBusinessIds)if(!1===this.disapprovedBusinessIds[t]){var s=this.businesses[t];s&&(s.id=t,e.push(s))}return e}},mounted:function(){var e=this;c.a.database().ref("/approved").on("value",(function(t){console.log(t.val()),e.disapprovedBusinessIds=t.val()})),c.a.database().ref("/businesses").on("value",(function(t){e.businesses=t.val()}))}},J=Z,K=Object(f["a"])(J,z,V,!1,null,"6f91723b",null),q=K.exports,Y={name:"Home",components:{DisapprovedBusinesses:q,PendingApproval:G,ApprovedBusinesses:M}},Q=Y,X=(s("b50a"),Object(f["a"])(Q,A,T,!1,null,"a9bf6b62",null)),ee=X.exports,te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v(e._s(e.business.name))]),s("b-form",{staticClass:"d-flex justify-content-center my-3",on:{submit:[function(e){e.preventDefault()},e.onSubmit]}},[s("b-form-select",{staticClass:"w-50",attrs:{options:e.types},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),s("b-button",{attrs:{type:"submit",variant:"success"}},[s("b-icon-check-circle")],1)],1),s("div",{staticClass:"img"},[s("img",{staticClass:"hero-img",attrs:{src:e.business.primaryImage}}),s("div",{staticClass:"download-button"},[s("a",{attrs:{download:"",href:e.business.primaryImage}},[e._v("Download Image")]),s("b-button",{on:{click:function(){e.reUpload(e.business)}}},[e._v("Re-upload")])],1)]),e.showUpload?s("div",[s("b-form-file",{model:{value:e.imageToUpload,callback:function(t){e.imageToUpload=t},expression:"imageToUpload"}}),s("b-btn",{attrs:{variant:"success"},on:{click:e.upload}},[e._v("Upload Image")])],1):e._e(),s("div",{staticClass:"description mt-4"},[e._v(" "+e._s(e.business.description)+" ")]),s("h3",{staticClass:"mt-5"},[e._v("Offers")]),e._l(e.business.offers,(function(t){return s("div",[t.disabled?e._e():s("div",{staticClass:"d-flex"},[s("div",[e._v(" "+e._s(t.description)+" ")]),s("div",{staticClass:"ml-auto"},[e._v(" Cooldown: "+e._s(t.cooldown)+" ")])])])})),s("h3",{staticClass:"mt-5"},[e._v("Approval")]),e.approved?s("div",[e._v(" Approved "),s("div",[s("b-button",{staticClass:"m-2",attrs:{variant:"danger"},on:{click:e.disapprove}},[e._v("Disapprove")])],1)]):e._e(),!1===e.approved?s("div",[e._v(" Disapproved "),s("div",[s("b-button",{staticClass:"m-2",attrs:{variant:"success"},on:{click:e.approve}},[e._v("Approve")])],1)]):e._e(),null===e.approved?s("div",[e._v(" Pending "),s("div",{staticClass:"d-flex justify-content-center"},[s("b-button",{staticClass:"m-2",attrs:{variant:"success"},on:{click:e.approve}},[e._v("Approve")]),s("b-button",{staticClass:"m-2",attrs:{variant:"danger"},on:{click:e.disapprove}},[e._v("Disapprove")])],1)]):e._e()],2)},se=[],ne=(s("99af"),s("d3b7"),s("07ac"),s("96cf"),s("1da1")),ae={name:"Business",data:function(){return{business:{},approved:null,types:[],type:"",showUpload:!1,imageToUpload:null}},mounted:function(){var e=this;c.a.database().ref("/businesses/".concat(this.$route.params.id)).on("value",(function(t){e.business=t.val(),e.type=e.business.type})),c.a.database().ref("/approved/".concat(this.$route.params.id)).on("value",(function(t){e.approved=t.val()})),c.a.database().ref("types").on("value",(function(t){e.types=Object.values(t.val())}))},methods:{disapprove:function(){var e=this.$route.params.id,t={};t[e]=!1,c.a.database().ref("/approved").update(t)},approve:function(){var e=this.$route.params.id,t={};t[e]=!0,c.a.database().ref("/approved").update(t)},onSubmit:function(){c.a.database().ref("/businesses/".concat(this.$route.params.id)).update({type:this.type})},upload:function(){this.imageToUpload&&c.a.storage().ref().child("/businesses/primary/".concat(this.business.owner,"/").concat(this.business.id)).put(this.imageToUpload)},reUpload:function(){var e=Object(ne["a"])(regeneratorRuntime.mark((function e(t){var s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t.primaryImage);case 2:return s=e.sent,e.next=5,s.blob();case 5:n=e.sent,a=c.a.storage().ref().child("/businesses/primary/".concat(t.owner,"/").concat(t.id)),a.put(n,{contentType:"image/jpeg"});case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},ie=ae,oe=(s("67ae"),Object(f["a"])(ie,te,se,!1,null,"00cda4e7",null)),re=oe.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("Business Types")]),s("ul",e._l(e.types,(function(t){return s("li",{staticClass:"my-1 hover-highlight"},[s("div",{staticClass:"d-flex"},[s("div",[e._v(e._s(t))]),s("b-btn",{staticClass:"ml-auto",attrs:{variant:"danger"},on:{click:function(){e.deleteType(t)}}},[e._v("Delete")])],1)])})),0),s("b-form",{on:{submit:[function(e){e.preventDefault()},e.onSubmit]}},[s("b-form-input",{attrs:{placeholder:"New Type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}})],1)],1)},ce=[],de=(s("7db0"),{name:"Types",data:function(){return{types:[],type:""}},mounted:function(){var e=this;c.a.database().ref("types").on("value",(function(t){e.types=t.val()}))},methods:{onSubmit:function(){c.a.database().ref("types").push(this.type),this.type=""},deleteType:function(e){var t=this,s=Object.keys(this.types).find((function(s){return t.types[s]===e}));c.a.database().ref("types/".concat(s)).remove()}}}),pe=de,le=(s("06c1"),Object(f["a"])(pe,ue,ce,!1,null,"61a96d5e",null)),ve=le.exports;n["default"].use(O["a"]);var fe=[{path:"/",name:"Home",component:ee},{path:"/business/:id",component:re,name:"Business"},{path:"/types",component:ve,name:"Types"}],be=new O["a"]({routes:fe}),me=be,he=s("9483");Object(he["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ge={dev:{apiKey:"AIzaSyATGeWuICmMSV6D2A8YPfbEi_5sfEgru0M",authDomain:"discouterreact.firebaseapp.com",databaseURL:"https://discouterreact.firebaseio.com",projectId:"discouterreact",storageBucket:"discouterreact.appspot.com",messagingSenderId:"741260647967",appId:"1:741260647967:web:8e38b5ec40c29697c5ff2a",measurementId:"G-MFWZSWRFH2"},prod:{apiKey:"AIzaSyDaur7di6NWiaPTaxiy7OeBaoZspjNTjw0",authDomain:"discouterproduction.firebaseapp.com",databaseURL:"https://discouterproduction.firebaseio.com",projectId:"discouterproduction",storageBucket:"discouterproduction.appspot.com",messagingSenderId:"221713246127",appId:"1:221713246127:web:22844b1d7cadcdb9ad315a",measurementId:"G-PV23Z2MHVL"}};n["default"].config.productionTip=!1,c.a.initializeApp(ge.prod),new n["default"]({router:me,render:function(e){return e(x)}}).$mount("#app")},"67ae":function(e,t,s){"use strict";var n=s("a219"),a=s.n(n);a.a},"85ec":function(e,t,s){},a219:function(e,t,s){},b50a:function(e,t,s){"use strict";var n=s("d9e9"),a=s.n(n);a.a},b919:function(e,t,s){},d9e9:function(e,t,s){}});
//# sourceMappingURL=app.e7fce4f7.js.map